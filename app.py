# 1. í”„ë¡œì„¸ìŠ¤ ì´ˆê¸°í™”
!pkill -9 streamlit
!pkill -9 cloudflared
!rm -f app.py
!pip install -q streamlit

# 2. ë¯¸ìŠ¤í„° í”„ë ˆì§€ë˜íŠ¸ (v24.1: íƒœê·¹ê¸° ëª…íŒ¨ ìˆ˜ì •íŒ)
import os

code = """
import streamlit as st
import pandas as pd
import random
import time
import base64
import os

# -----------------------------------------------------------------------------
# [ì„¤ì •] ë°ì´í„° & ë¦¬ì†ŒìŠ¤
# -----------------------------------------------------------------------------
ARCHS = ["ìë³¸ê°€", "ì¤‘ì‚°ì¸µ", "ë…¸ë™ì", "ë¹ˆê³¤ì¸µ"]

# ë¡œì»¬ íŒŒì¼ ê²½ë¡œ (ì—…ë¡œë“œ í•„ìš”)
FILE_BGM = "bgm.mp3"
FILE_BG = "background.jpg"

# ë¡œì»¬ ì˜¤ë””ì˜¤ íŒŒì¼ì„ HTMLë¡œ ë³€í™˜
def get_audio_html(file_path):
    try:
        with open(file_path, "rb") as f:
            data = f.read()
        b64 = base64.b64encode(data).decode()
        return f'<audio controls autoplay loop style="width: 100%; margin-bottom: 20px;"><source src="data:audio/mp3;base64,{b64}" type="audio/mp3"></audio>'
    except FileNotFoundError:
        return "<div style='color:red;'>âš ï¸ bgm.mp3 íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ì™¼ìª½ í´ë”ì— ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</div>"

# ë°°ê²½ ì´ë¯¸ì§€ ë¡œë“œ
def render_background():
    if os.path.exists(FILE_BG):
        st.image(FILE_BG, use_container_width=True)

# ê³„ì¸µ ì„¤ëª…
ARCH_DESC = {
    "ìë³¸ê°€": "ğŸ’° **[ê¸°ì—…ì£¼/ê±´ë¬¼ì£¼]** ì„¸ê¸ˆê³¼ ê·œì œë¥¼ í˜ì˜¤í•˜ë©°, ìì‚° ê°€ì¹˜ ë³´ì „ì„ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤.",
    "ì¤‘ì‚°ì¸µ": "ğŸ  **[í™”ì´íŠ¸ì¹¼ë¼/ìœ ì£¼íƒì]** 'ì—´ì‹¬íˆ ì¼í•˜ëŠ”ë° êµ­ê°€ê°€ ì„¸ê¸ˆìœ¼ë¡œ ë‹¤ ê°€ì ¸ê°„ë‹¤'ëŠ” ë¶ˆë§Œì´ í½ë‹ˆë‹¤. ì§‘ê°’ê³¼ êµìœ¡, ë¬¼ê°€ì— ë¯¼ê°í•©ë‹ˆë‹¤.",
    "ë…¸ë™ì": "ğŸ‘· **[ë¸”ë£¨ì¹¼ë¼/ì„ê¸ˆìƒí™œì]** ìì‚°ë³´ë‹¤ëŠ” 'ì›”ê¸‰'ê³¼ 'ê³ ìš© ì•ˆì •'ì´ ìƒëª…ì…ë‹ˆë‹¤. ë…¸ë™ê¶Œê³¼ ì„ê¸ˆ ì¸ìƒì„ ì›í•©ë‹ˆë‹¤.",
    "ë¹ˆê³¤ì¸µ": "ğŸ™ **[ê¸°ì´ˆìˆ˜ê¸‰/ì†Œì™¸ê³„ì¸µ]** êµ­ê°€ì˜ ë³µì§€ ì—†ì´ëŠ” ìƒì¡´ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ê¸ˆ ì§€ì›ê³¼ ê³µê³µ ì„œë¹„ìŠ¤ê°€ ì ˆì‹¤í•©ë‹ˆë‹¤."
}

# ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ (15ì¢…)
CRISES_POOL = [
    {
        "title": "ğŸ“‰ ê¸€ë¡œë²Œ ë³µí•© ê¸ˆìœµ ìœ„ê¸°",
        "desc": "ë¯¸êµ­ë°œ ê¸ˆë¦¬ ì¸ìƒê³¼ ì „ìŸ ë¦¬ìŠ¤í¬ë¡œ ì£¼ê°€ê°€ í­ë½í•˜ê³  í™˜ìœ¨ì´ 1,500ì›ì„ ëŒíŒŒí–ˆìŠµë‹ˆë‹¤. ê¸°ì—…ë“¤ì€ ì¤„ë„ì‚°ì„ ê²½ê³ í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
        "options": [
            {"name": "ë²•ì¸ì„¸ ì¸í•˜ (ë‚™ìˆ˜íš¨ê³¼)", "icon": "ğŸ’¸", "cost": -10, "effect": [15, 5, -10, -15], "detail": "ê¸°ì—…ì˜ ì„¸ê¸ˆì„ ê¹ì•„ì£¼ì–´ íˆ¬ìë¥¼ ìœ ë„í•©ë‹ˆë‹¤. ê¸°ì—… ìˆ¨í†µì€ íŠ¸ì´ì§€ë§Œ, ì„¸ìˆ˜ ë¶€ì¡±ìœ¼ë¡œ ë³µì§€ ì˜ˆì‚°ì´ ëŒ€í­ ì‚­ê°ë˜ì–´ ë¹ˆê³¤ì¸µì€ íƒ€ê²©ì„ ì…ìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€+15 (ê°ì„¸), ë¹ˆê³¤ì¸µ-15 (ë³µì§€ì¶•ì†Œ)"},
            {"name": "ì¬ë‚œì§€ì›ê¸ˆ ì‚´í¬", "icon": "ğŸ", "cost": -30, "effect": [-15, 5, 10, 20], "detail": "êµ­ì±„ë¥¼ ë°œí–‰í•´ í˜„ê¸ˆì„ í’‰ë‹ˆë‹¤. ë‚´ìˆ˜ëŠ” ë°©ì–´í•˜ì§€ë§Œ, ë¬¼ê°€ ìƒìŠ¹ê³¼ êµ­ê°€ ë¶€ì±„ ê¸‰ì¦ìœ¼ë¡œ ìì‚°ê°€ë“¤ì´ ì´íƒˆí•˜ê³  ê²½ì œ í€ë”ë©˜í„¸ì´ í›¼ì†ë©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+20 (í˜„ê¸ˆ), ìë³¸ê°€-15 (ì¸í”Œë ˆ)"},
            {"name": "ê³ ê¸ˆë¦¬ ê¸´ì¶• (êµ¬ì¡°ì¡°ì •)", "icon": "ğŸ”¨", "cost": +10, "effect": [5, -20, -10, -5], "detail": "í—ˆë¦¬ë ë¥¼ ì¡¸ë¼ë§¤ì–´ ë¬¼ê°€ë¥¼ ì¡ìŠµë‹ˆë‹¤. êµ­ê°€ ì‹ ìš©ì€ ì§€í‚¤ì§€ë§Œ, ì´ì í­íƒ„ì„ ë§ì€ 'ì˜ëŒ' ì¤‘ì‚°ì¸µê³¼ ë¹šìœ¼ë¡œ ë²„í‹°ë˜ ìì˜ì—…ìë“¤ì´ ë¶•ê´´í•©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+5 (ìì‚°ë°©ì–´), ì¤‘ì‚°ì¸µ-20 (ì´ìí­íƒ„)"}
        ]
    },
    {
        "title": "ğŸ¦  ì¹˜ëª…ì  ì‹ ì¢… ë°”ì´ëŸ¬ìŠ¤",
        "desc": "ì¹˜ì‚¬ìœ¨ ë†’ì€ ì „ì—¼ë³‘ì´ í™•ì‚° ì¤‘ì…ë‹ˆë‹¤. ë³‘ìƒì€ í¬í™” ìƒíƒœì´ë©°, ê³µí¬ì— ì§ˆë¦° ì‹œë¯¼ë“¤ì˜ ì‚¬ì¬ê¸°ê°€ ì´ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
        "options": [
            {"name": "êµ­ê°€ ë´‰ì‡„ (Lockdown)", "icon": "ğŸ”’", "cost": -10, "effect": [-5, -10, -15, 5], "detail": "ê°•ë ¥í•œ ë´‰ì‡„ë¡œ í™•ì§„ìëŠ” ì¤„ì´ì§€ë§Œ, ìì˜ì—…ìì™€ ì¼ìš©ì§ ë…¸ë™ìì˜ ìƒê³„ê°€ ëŠê¹ë‹ˆë‹¤. ê²½ì œ í™œë™ ë§ˆë¹„ë¡œ ì¸í•œ í”¼í•´ê°€ ëˆˆë©ì´ì²˜ëŸ¼ ë¶ˆì–´ë‚©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+5 (ìƒëª…ë³´í˜¸), ë…¸ë™ì-15 (ì‹¤ì§)"},
            {"name": "ìœ„ë“œ ì½”ë¡œë‚˜ (ê²½ì œ ìš°ì„ )", "icon": "ğŸ“ˆ", "cost": 0, "effect": [10, 5, 0, -25], "detail": "ê²½ì œê°€ ë©ˆì¶”ëŠ” ê²ƒì€ ë§‰ì•˜ìœ¼ë‚˜, ì˜ë£Œ ì‹œìŠ¤í…œì´ ë¶•ê´´ë©ë‹ˆë‹¤. ì¹˜ë£Œë¹„ê°€ ì—†ê±°ë‚˜ ë©´ì—­ë ¥ì´ ì•½í•œ ì·¨ì•½ê³„ì¸µ ì‚¬ë§ìê°€ ê¸‰ì¦í•˜ë©° 'ê°ìë„ìƒ' ì‚¬íšŒê°€ ë©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+10 (ë§¤ì¶œìœ ì§€), ë¹ˆê³¤ì¸µ-25 (ì‚¬ë§)"},
            {"name": "ì¹˜ë£Œì œ ë¬´ìƒ ê³µê¸‰", "icon": "ğŸ’Š", "cost": -40, "effect": [-5, 5, 5, 15], "detail": "ì²œë¬¸í•™ì ì¸ ì˜ˆì‚°ì„ ìŸì•„ë¶€ì–´ êµ­ë¯¼ ìƒëª…ì€ ì§€í‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ê±´ê°•ë³´í—˜ ê¸°ê¸ˆì´ ê³ ê°ˆ ìœ„ê¸°ì— ì²˜í•˜ê³ , ì´ë¥¼ ë©”ê¾¸ê¸° ìœ„í•œ ì¦ì„¸ ë…¼ì˜ì— ìƒìœ„ì¸µì´ ë°˜ë°œí•©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+15 (ë¬´ìƒì¹˜ë£Œ), êµ­ê³ -40 (ì¬ì •íƒ€ê²©)"}
        ]
    },
    {
        "title": "ğŸ“¢ ê´‘í™”ë¬¸ 100ë§Œ ì´›ë¶ˆ",
        "desc": "ì •ë¶€ì˜ ë¶ˆí†µê³¼ ì‹¤ì •ì— ë¶„ë…¸í•œ ì‹œë¯¼ë“¤ì´ ê´‘í™”ë¬¸ì„ ê°€ë“ ë©”ì› ìŠµë‹ˆë‹¤. 'ëŒ€í†µë ¹ í‡´ì§„' êµ¬í˜¸ê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.",
        "options": [
            {"name": "ë¶€ì ì¦ì„¸ ë° ë³µì§€ í™•ëŒ€", "icon": "âš–ï¸", "cost": +20, "effect": [-25, -5, 10, 20], "detail": "ì‹œìœ„ëŒ€ì˜ ìš”êµ¬ë¥¼ ìˆ˜ìš©í•´ ì–‘ê·¹í™” í•´ì†Œ ëŒ€ì±…ì„ ë°œí‘œí•©ë‹ˆë‹¤. ì„œë¯¼ë“¤ì€ í™˜í˜¸í•˜ì§€ë§Œ, ì§•ë²Œì  ê³¼ì„¸ì— ë¶„ë…¸í•œ ìì‚°ê°€ë“¤ì€ ìë³¸ì„ í•´ì™¸ë¡œ ë¹¼ëŒë¦½ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+20 (í˜œíƒ), ìë³¸ê°€-25 (ì„¸ê¸ˆí­íƒ„)"},
            {"name": "ê³µê¶Œë ¥ íˆ¬ì… (ê°•ê²½ ì§„ì••)", "icon": "ğŸ›¡ï¸", "cost": -5, "effect": [15, 5, -20, -15], "detail": "ê²½ì°°ë ¥ì„ ë™ì›í•´ ê°•ì œ í•´ì‚°ì‹œí‚µë‹ˆë‹¤. ë³´ìˆ˜ ì§€ì§€ì¸µì€ 'ë²•ì¹˜ í™•ë¦½'ì´ë¼ë©° ê²°ì§‘í•˜ì§€ë§Œ, ê³¼ì‰ ì§„ì•• ë…¼ë€ìœ¼ë¡œ ì¤‘ë„ì¸µê³¼ ì Šì€ ì„¸ëŒ€ëŠ” ë“±ì„ ëŒë¦½ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+15 (ì§ˆì„œ), ë…¸ë™ì-20 (íƒ„ì••)"},
            {"name": "ëŒ€êµ­ë¯¼ ì‚¬ê³¼ ë° ë‚´ê° ì´ì‚¬í‡´", "icon": "ğŸ™‡", "cost": 0, "effect": [-10, 5, 5, 5], "detail": "ëŒ€í†µë ¹ì´ ê³ ê°œë¥¼ ìˆ™ì´ê³  ì°¸ëª¨ì§„ì„ ì „ì› êµì²´í•©ë‹ˆë‹¤. ë¶„ë…¸ëŠ” ê°€ë¼ì•‰ì§€ë§Œ, êµ­ì • ë™ë ¥ì´ ìƒì‹¤ë˜ì–´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ëŠ” 'ì‹ë¬¼ ì •ë¶€'ê°€ ë©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€-10 (ë¬´ëŠ¥), ì¤‘ì‚°ì¸µ+5 (ì†Œí†µ)"}
        ]
    },
    {
        "title": "ğŸ¤– AIê°€ ì¼ìë¦¬ë¥¼ ìŠµê²©í•˜ë‹¤",
        "desc": "ìƒì„±í˜• AIì˜ ë°œì „ìœ¼ë¡œ ì‚¬ë¬´ì§ê³¼ ë‹¨ìˆœ ë…¸ë¬´ì§ì˜ ëŒ€ëŸ‰ í•´ê³ ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ê³ ìš© ë¶ˆì•ˆ ê³µí¬ê°€ ì‚¬íšŒë¥¼ ë®ì³¤ìŠµë‹ˆë‹¤.",
        "options": [
            {"name": "ë¡œë´‡ì„¸ ë„ì… (ê¸°ë³¸ì†Œë“)", "icon": "ğŸ¤–", "cost": -15, "effect": [-20, 5, 10, 10], "detail": "ê¸°ì—…ì— ì„¸ê¸ˆì„ ë¬¼ë ¤ ì‹¤ì§ìì—ê²Œ í˜„ê¸ˆì„ ì§€ê¸‰í•©ë‹ˆë‹¤. ë…¸ë™ìë“¤ì€ ì•ˆë„í•˜ì§€ë§Œ, ê¸°ì—…ë“¤ì€ 'í˜ì‹ ì„ ê°€ë¡œë§‰ëŠ” ê·œì œ'ë¼ë©° ë³¸ì‚¬ ì´ì „ì„ ê²€í† í•©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€-20 (ê·œì œ), ë…¸ë™ì+10 (ì•ˆì „ë§)"},
            {"name": "AI ê·œì œ ì² í (ì„±ì¥)", "icon": "ğŸš€", "cost": +10, "effect": [20, 5, -15, -15], "detail": "AI ê°•êµ­ìœ¼ë¡œ ë„ì•½í•˜ë©° êµ­ê°€ ê²½ìŸë ¥ê³¼ ì£¼ê°€ëŠ” í­ë“±í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ êµ¬ì¡°ì¡°ì • ë‹¹í•œ ìˆ˜ë§Œ ëª…ì˜ ë…¸ë™ìë“¤ì´ ê±°ë¦¬ë¡œ ë‚˜ì•‰ì•„ ë¹ˆê³¤ì¸µìœ¼ë¡œ ì „ë½í•©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+20 (ì£¼ê°€í­ë“±), ë…¸ë™ì-15 (í•´ê³ )"},
            {"name": "ê³µê³µ ê·¼ë¡œ í™•ëŒ€", "icon": "ğŸ§¹", "cost": -20, "effect": [-5, -5, 5, 10], "detail": "ì •ë¶€ê°€ ì„¸ê¸ˆìœ¼ë¡œ ë‹¨ê¸° ì¼ìë¦¬ë¥¼ ê¸‰ì¡°í•´ ê¸‰í•œ ë¶ˆì€ ê»ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ 'ì„¸ê¸ˆ ë‚­ë¹„', 'ì§ˆ ë‚®ì€ ì¼ìë¦¬'ë¼ëŠ” ë¹„íŒ ì†ì— ì²­ë…„ì¸µì˜ ë°•íƒˆê°ì€ ì—¬ì „í•©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+10 (ìƒê³„), êµ­ê³ -20 (ë¹„ìš©)"}
        ]
    },
    {
        "title": "âš”ï¸ ì£¼ë³€êµ­ ë¬´ì—­ ë³´ë³µ ì¡°ì¹˜",
        "desc": "ì™¸êµ ê°ˆë“±ìœ¼ë¡œ ì£¼ìš” êµì—­êµ­ì´ í•µì‹¬ ì†Œì¬ ìˆ˜ì¶œì„ ê¸ˆì§€í–ˆìŠµë‹ˆë‹¤. ê³µì¥ ê°€ë™ì´ ë©ˆì¶”ê³  ìˆ˜ì¶œê¸¸ì´ ë§‰í ìœ„ê¸°ì…ë‹ˆë‹¤.",
        "options": [
            {"name": "êµ´ìš•ì  í˜‘ìƒ (ì‹¤ë¦¬)", "icon": "ğŸ¤", "cost": 0, "effect": [10, 5, 5, -5], "detail": "ìƒëŒ€êµ­ì˜ ìš”êµ¬ë¥¼ ë“¤ì–´ì£¼ê³  ìˆ˜ì¶œê¸¸ì„ ì—½ë‹ˆë‹¤. ê²½ì œëŠ” ì‚´ë ¸ìœ¼ë‚˜, 'êµ­ê²©ì„ íŒ”ì•„ë¨¹ì—ˆë‹¤'ëŠ” êµ­ë¯¼ì  ë¹„ë‚œê³¼ ìì¡´ì‹¬ì˜ ìƒì²˜ëŠ” ê¹ŠìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€+10 (ë§¤ì¶œíšŒë³µ), ë¹ˆê³¤ì¸µ-5 (ìì¡´ì‹¬)"},
            {"name": "ê°•ê²½ ëŒ€ì‘ (ë§ë¶ˆ)", "icon": "ğŸ”¥", "cost": -10, "effect": [-15, -10, -10, -5], "detail": "ìì£¼ êµ­ê°€ì˜ ìì¡´ì‹¬ì€ ì§€í‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ë¬´ì—­ ì „ìŸì´ ì¥ê¸°í™”ë˜ë©´ì„œ ë¬¼ê°€ê°€ í­ë“±í•˜ê³  ê¸°ì—… ì‹¤ì ì´ ì•…í™”ë˜ì–´ ì „ êµ­ë¯¼ì´ ê³ í†µë°›ìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€-15 (ë§¤ì¶œê¸‰ê°), ì¤‘ì‚°ì¸µ-10 (ë¬¼ê°€)"},
            {"name": "ì†Œì¬ êµ­ì‚°í™” R&D", "icon": "ğŸ”¬", "cost": -30, "effect": [-5, -5, 5, 0], "detail": "ì¥ê¸°ì ì¸ ê¸°ìˆ  ë…ë¦½ì„ ì„ ì–¸í•©ë‹ˆë‹¤. ë°©í–¥ì€ ì˜³ì§€ë§Œ, ë‹¹ì¥ì˜ ì„±ê³¼ê°€ ë‚˜ì˜¤ê¸°ê¹Œì§€ ë§‰ëŒ€í•œ ì˜ˆì‚° ì¶œí˜ˆê³¼ ê²½ê¸° ì¹¨ì²´ë¥¼ ê°ë‚´í•´ì•¼ í•©ë‹ˆë‹¤.", "reason": "ë…¸ë™ì+5 (ì¼ìë¦¬), êµ­ê³ -30 (ì§€ì¶œ)"}
        ]
    },
    {
        "title": "ğŸ­ ìµœì•…ì˜ ë¯¸ì„¸ë¨¼ì§€ì™€ ê¸°í›„ ì¬ë‚œ",
        "desc": "ìˆ¨ì„ ì‰´ ìˆ˜ ì—†ëŠ” ë¯¸ì„¸ë¨¼ì§€ì™€ ê¸°ë¡ì ì¸ í­ìš°ê°€ ë™ì‹œì— ë®ì³¤ìŠµë‹ˆë‹¤. ë°˜ì§€í•˜ ê±°ì£¼ë¯¼ì´ ê³ ë¦½ë˜ê³  ë†ì‘ë¬¼ ê°€ê²©ì´ í­ë“±í•©ë‹ˆë‹¤.",
        "options": [
            {"name": "íƒ„ì†Œì„¸ ë„ì… (ê·œì œ)", "icon": "ğŸŒ³", "cost": +5, "effect": [-15, -5, 5, 10], "detail": "ê°•ë ¥í•œ ê·œì œë¡œ í™˜ê²½ì€ ê°œì„ ë˜ì—ˆê³  ì„¸ìˆ˜ë„ ëŠ˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¹„ìš© ë¶€ë‹´ì´ ì»¤ì§„ ê¸°ì—…ë“¤ì´ ê³ ìš©ì„ ì¤„ì˜€ê³ , ë¬¼ê°€ ìƒìŠ¹ìœ¼ë¡œ ì¤‘ì‚°ì¸µì˜ ì‚¶ì´ íŒíŒí•´ì¡ŒìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€-15 (ë¹„ìš©), ë¹ˆê³¤ì¸µ+10 (ì•ˆì „)"},
            {"name": "ê²½ì œ ìš°ì„  (ê·œì œ ì™„í™”)", "icon": "ğŸ­", "cost": 0, "effect": [15, 5, -10, -20], "detail": "ê³µì¥ì„ í’€ê°€ë™í•´ ê²½ì œ ì§€í‘œëŠ” ë°©ì–´í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê¸°í›„ ì¬ë‚œì˜ í”¼í•´ëŠ” ê³ ìŠ¤ë€íˆ ì·¨ì•½ê³„ì¸µì—ê²Œ ì§‘ì¤‘ë˜ì–´, ë¹ˆë¯¼ê°€ì˜ ì£¼ê±° í™˜ê²½ì´ íŒŒê´´ë˜ì—ˆìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€+15 (ì´ìµ), ë¹ˆê³¤ì¸µ-20 (ì¹¨ìˆ˜í”¼í•´)"},
            {"name": "í”¼í•´ ë³µêµ¬ ì§€ì›ê¸ˆ", "icon": "ğŸ’°", "cost": -20, "effect": [-5, 0, 0, 10], "detail": "í”¼í•´ ì…ì€ êµ­ë¯¼ì—ê²Œ í˜„ê¸ˆì„ ì§€ê¸‰í•´ ì›ì„±ì„ ë‹¬ë¬ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¼ë³¸ì ì¸ ì›ì¸ì€ í•´ê²°ë˜ì§€ ì•Šì•„ ë§¤ë…„ ê°™ì€ ì¬ë‚œì´ ë°˜ë³µë  ê²ƒì´ë©° ì¬ì •ë§Œ ì¶•ë‚©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+10 (êµ¬ì œ), êµ­ê³ -20 (ì§€ì¶œ)"}
        ]
    },
    {
        "title": "ğŸ“‰ í•©ê³„ì¶œì‚°ìœ¨ 0.5ëª… ì‡¼í¬",
        "desc": "êµ­ê°€ ì†Œë©¸ ìœ„ê¸°ë¡ ì´ ëŒ€ë‘ë˜ì—ˆìŠµë‹ˆë‹¤. êµ­ë¯¼ì—°ê¸ˆ ê³ ê°ˆ ê³µí¬ê°€ í™•ì‚°ë˜ë©° ì„¸ëŒ€ ê°„ ê°ˆë“±ì´ í­ë°œ ì§ì „ì…ë‹ˆë‹¤.",
        "options": [
            {"name": "í˜„ê¸ˆ ì§€ì› ëŒ€í­ í™•ëŒ€", "icon": "ğŸ‘¶", "cost": -30, "effect": [-5, 10, 5, -5], "detail": "ì•„ì´ ë‚³ëŠ” ê°€ì •ì— íŒŒê²©ì ì¸ ëˆì„ ì£¼ì–´ ì¤‘ì‚°ì¸µì€ í™˜í˜¸í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¬ì› ë§ˆë ¨ì„ ìœ„í•´ ë…¸ì¸ ë³µì§€ ì˜ˆì‚°ì„ ê¹ìœ¼ë©´ì„œ ì·¨ì•½ê³„ì¸µ ë…¸ì¸ë“¤ì€ ìƒì¡´ ìœ„ê¸°ì…ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ+10 (ì–‘ìœ¡ë¹„), ë¹ˆê³¤ì¸µ-5 (ë³µì§€ì¶•ì†Œ)"},
            {"name": "ì´ë¯¼ì²­ ì„¤ë¦½ (ê°œë°©)", "icon": "ğŸŒ", "cost": -5, "effect": [10, -10, -10, 5], "detail": "ë…¸ë™ë ¥ ë¶€ì¡±ì„ ì™¸êµ­ì¸ìœ¼ë¡œ ì±„ì›Œ ê¸°ì—…ì€ ì•ˆë„í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¼ìë¦¬ ê²½ìŸì´ ì¹˜ì—´í•´ì§„ ë…¸ë™ìì™€ ë¬¸í™”ì  ì¶©ëŒì„ ìš°ë ¤í•˜ëŠ” ì¤‘ì‚°ì¸µì˜ ë°˜ë°œì´ ê±°ì…‰ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+10 (ì¸ë ¥), ë…¸ë™ì-10 (ê²½ìŸ)"},
            {"name": "ì—°ê¸ˆ ê°œí˜ (ê³ í†µ ë¶„ë‹´)", "icon": "ğŸ‘´", "cost": +10, "effect": [-5, -15, -15, -5], "detail": "ì¬ì • ì‹œí•œí­íƒ„ì€ ì œê±°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‹¹ì¥ ì›”ê¸‰ì—ì„œ ë” ë§ì€ ëˆì´ ë–¼ì´ëŠ” ì§ì¥ì¸ë“¤ì˜ ë¶„ë…¸ê°€ íˆ¬í‘œ ì‹¬íŒìœ¼ë¡œ ì´ì–´ì§ˆ ê¸°ì„¸ì…ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ-15 (ë³´í—˜ë£Œ), êµ­ê³ +10 (ì¬ì •)"}
        ]
    },
    {
        "title": "ğŸ˜ï¸ ë¶€ë™ì‚° ì‹œì¥ ëŒ€í­ë½",
        "desc": "ê¸ˆë¦¬ ì¸ìƒ ì—¬íŒŒë¡œ ì§‘ê°’ì´ 30% ì´ìƒ ê¸‰ë½í–ˆìŠµë‹ˆë‹¤. ê¹¡í†µ ì „ì„¸ í”¼í•´ìê°€ ì†ì¶œí•˜ê³  ê±´ì„¤ì‚¬ ë¶€ë„ ìœ„ê¸°ê°€ ê°ë•ë‹ˆë‹¤.",
        "options": [
            {"name": "ë¶€ì–‘ì±… (ê·œì œ ì™„í™”)", "icon": "ğŸ ", "cost": -10, "effect": [15, 5, -10, -10], "detail": "ë‹¤ì£¼íƒì ê°ì„¸ì™€ ëŒ€ì¶œ ì™„í™”ë¡œ ì§‘ê°’ ë°©ì–´ì— ì„±ê³µí•´ ìì‚°ê°€ë“¤ì€ ì•ˆë„í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ 'ë¶€ìë§Œ ì‚´ë ¤ì¤€ë‹¤'ëŠ” ë¹„íŒ ì†ì— ë¬´ì£¼íƒ ì„œë¯¼ì˜ ê¿ˆì€ ë©€ì–´ì§‘ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+15 (ìì‚°ë°©ì–´), ë…¸ë™ì-10 (ë°•íƒˆê°)"},
            {"name": "ì‹œì¥ ììœ¨ (ë°©ê´€)", "icon": "ğŸ“‰", "cost": 0, "effect": [-20, -20, 10, 5], "detail": "ê±°í’ˆì´ êº¼ì§€ë©° ë¬´ì£¼íƒìë“¤ì€ í™˜í˜¸í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ìì‚°ì´ ì¦ë°œí•œ ìƒìœ„ì¸µê³¼ ì¤‘ì‚°ì¸µì˜ ì†Œë¹„ê°€ ì–¼ì–´ë¶™ì–´ ì‹¤ë¬¼ ê²½ê¸°ê°€ ê¹Šì€ ì¹¨ì²´ì— ë¹ ì§‘ë‹ˆë‹¤.", "reason": "ìë³¸ê°€-20 (í­ë½), ë…¸ë™ì+10 (ë‚´ì§‘ë§ˆë ¨)"},
            {"name": "ì „ì„¸ ì‚¬ê¸° í”¼í•´ êµ¬ì œ", "icon": "âš–ï¸", "cost": -20, "effect": [-5, -5, 10, 15], "detail": "ì„¸ê¸ˆìœ¼ë¡œ í”¼í•´ ë³´ì¦ê¸ˆì„ ì§€ì›í•´ ì„œë¯¼ë“¤ì˜ ëˆˆë¬¼ì„ ë‹¦ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì„±ì‹¤ ìƒí™˜ìë“¤ê³¼ì˜ í˜•í‰ì„± ë…¼ë€ì´ ì¼ë©° ë‚©ì„¸ìë“¤ì˜ ë¶ˆë§Œì´ ì»¤ì§‘ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+15 (êµ¬ì œ), êµ­ê³ -20 (ì„¸ê¸ˆ)"}
        ]
    },
    {
        "title": "ğŸ•µï¸ ê¶Œë ¥í˜• ë¹„ë¦¬ ê²Œì´íŠ¸",
        "desc": "ì¸¡ê·¼ ë¹„ë¦¬ ë°œê°. 'ê³µì •'ì— ë¯¼ê°í•œ ì—¬ë¡  í­ë°œ.",
        "options": [
            {"name": "ì„±ì—­ ì—†ëŠ” ìˆ˜ì‚¬", "icon": "ğŸš”", "cost": 0, "effect": [-15, 10, 10, 0], "detail": "ì„±ì—­ ì—†ëŠ” ìˆ˜ì‚¬ë¡œ ì§€ì§€ìœ¨ì„ íšŒë³µí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ë‹¹ ë‚´ ê¸°ë“ê¶Œ ì„¸ë ¥ì´ ë°˜ë°œí•˜ë©° ëŒ€í†µë ¹ì˜ ë‹¹ë‚´ ì…ì§€ê°€ ì¢ì•„ì§€ê³  êµ­ì • ìš´ì˜ì´ ì™¸ë¡œì›Œì§‘ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ+10 (ê³µì •), ìë³¸ê°€-15 (ë°˜ë°œ)"},
            {"name": "ì •ì¹˜ íƒ„ì•• ì£¼ì¥ (ì˜¹í˜¸)", "icon": "ğŸ›¡ï¸", "cost": 0, "effect": [5, -20, -20, -5], "detail": "í•µì‹¬ ì§€ì§€ì¸µì€ ê²°ì§‘ì‹œì¼°ìœ¼ë‚˜, ì¤‘ë„ì¸µê³¼ ì²­ë…„ì¸µì€ 'ë‚´ë¡œë‚¨ë¶ˆ'ì´ë¼ë©° ë“±ì„ ëŒë ¸ìŠµë‹ˆë‹¤. ì •ê¶Œì˜ ë„ë•ì„±ì´ ë°”ë‹¥ì— ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€+5 (ê²°ì§‘), ì¤‘ì‚°ì¸µ-20 (ì‹¤ë§)"},
            {"name": "ì œë„ ê°œí˜ ì•½ì† (ë¬¼íƒ€ê¸°)", "icon": "ğŸ“œ", "cost": -10, "effect": [-5, 5, 5, 0], "detail": "ì œë„ ê°œì„ ì„ ì•½ì†í•˜ë©° ì‹œì„ ì„ ëŒë ¸ìŠµë‹ˆë‹¤. ê·¼ë³¸ì ì¸ í•´ê²°ì±…ì´ ë  ìˆ˜ ìˆìœ¼ë‚˜, ë‹¹ì¥ ì±…ì„ì ì²˜ë²Œì„ ì›í–ˆë˜ ì—¬ë¡ ì„ ì ì¬ìš°ê¸°ì—” ì—­ë¶€ì¡±ì…ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ+5 (ê¸°ëŒ€), ìë³¸ê°€-5 (í”¼ë¡œ)"}
        ]
    },
    {
        "title": "âš¡ ì—ë„ˆì§€ ìœ„ê¸° (ìœ ê°€ í­ë“±)",
        "desc": "ì¤‘ë™ ì „ìŸìœ¼ë¡œ ìœ ê°€ê°€ ë°°ëŸ´ë‹¹ 150ë¶ˆì„ ë„˜ì—ˆìŠµë‹ˆë‹¤. ë‚œë°©ë¹„ í­íƒ„ì— ì„œë¯¼ë“¤ì€ ë–¨ê³  ìˆê³ , í•œì „ ì ìëŠ” ê°ë‹¹ ë¶ˆê°€ì…ë‹ˆë‹¤.",
        "options": [
            {"name": "ìš”ê¸ˆ í˜„ì‹¤í™” (ì¸ìƒ)", "icon": "ğŸ’¡", "cost": +10, "effect": [0, -10, -15, -20], "detail": "ê³µê¸°ì—… ë¶€ì‹¤ì€ ë§‰ì•˜ê³  êµ­ê°€ ì‹ ìš©ë„ë„ ì§€ì¼°ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê´€ë¦¬ë¹„ ê³ ì§€ì„œë¥¼ ë°›ì€ êµ­ë¯¼ë“¤ì˜ ë¶„ë…¸ê°€ í•˜ëŠ˜ì„ ì°Œë¥´ê³ , ì·¨ì•½ê³„ì¸µì€ ëƒ‰ê³¨ì—ì„œ ì¡ë‹ˆë‹¤.", "reason": "êµ­ê³ +10 (ê±´ì „ì„±), ë¹ˆê³¤ì¸µ-20 (ìƒì¡´ìœ„í˜‘)"},
            {"name": "ìš”ê¸ˆ ë™ê²° (ì ì ë³´ì „)", "icon": "â„ï¸", "cost": -30, "effect": [-5, 10, 10, 10], "detail": "ì„¸ê¸ˆìœ¼ë¡œ ìš”ê¸ˆ ì¸ìƒì„ ë§‰ì•„ êµ­ë¯¼ ë¶€ë‹´ì€ ì¤„ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ êµ­ê°€ ë¶€ì±„ê°€ ê¸‰ì¦í–ˆê³ , ì—ë„ˆì§€ ê³¼ì†Œë¹„ëŠ” ì—¬ì „í•´ ë¯¸ë´‰ì±…ì´ë¼ëŠ” ë¹„íŒì„ ë°›ìŠµë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+10 (ì•ˆë„), êµ­ê³ -30 (ë¶€ì±„)"},
            {"name": "ë°”ìš°ì²˜ ì„ ë³„ ì§€ê¸‰", "icon": "ğŸ«", "cost": -10, "effect": [0, -5, -5, 15], "detail": "ì·¨ì•½ê³„ì¸µì—ê²Œë§Œ ë‚œë°©ë¹„ë¥¼ ì§€ì›í–ˆìŠµë‹ˆë‹¤. ì§€ì›ì„ ëª» ë°›ì€ ì¤‘ì‚°ì¸µê³¼ ì„œë¯¼ë“¤ì€ 'ë‚˜ë„ í˜ë“ ë° ì™œ ì•ˆ ì£¼ëƒ'ë©° ìƒëŒ€ì  ë°•íƒˆê°ì„ í˜¸ì†Œí•©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+15 (ìƒì¡´), ë…¸ë™ì-5 (ë°•íƒˆê°)"}
        ]
    },
    {
        "title": "ğŸ’£ ë¶í•œ êµ­ì§€ì  ë„ë°œ",
        "desc": "íœ´ì „ì„  í¬ê²© ë„ë°œ. ê¸ˆìœµ ì‹œì¥ ì¶œë , ì•ˆë³´ ë¶ˆì•ˆ ìµœê³ ì¡°.",
        "options": [
            {"name": "ê°•ë ¥ ì‘ì§• (ë³´ë³µ)", "icon": "âš”ï¸", "cost": -20, "effect": [5, -5, -5, -5], "detail": "ë‹¨í˜¸í•œ ëŒ€ì²˜ë¡œ ë³´ìˆ˜ì¸µ ê²°ì§‘ê³¼ ì•ˆë³´ ì˜ì§€ë¥¼ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì „ìŸ ê³µí¬ë¡œ ì™¸êµ­ì¸ ìë³¸ì´ ë¹ ì ¸ë‚˜ê°€ê³  ì£¼ê°€ê°€ í­ë½í•´ ê²½ì œê°€ íœ˜ì²­ì…ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+5 (ì•ˆë³´), ì¤‘ì‚°ì¸µ-5 (ì£¼ê°€í•˜ë½)"},
            {"name": "ëŒ€í™” ì‹œë„ (í‰í™”)", "icon": "ğŸ•Šï¸", "cost": 0, "effect": [-15, 5, 5, 5], "detail": "í™•ì „ì€ ë§‰ì•˜ì§€ë§Œ, 'êµ´ì¢…ì ì¸ íƒœë„'ë¼ëŠ” ë¹„íŒì„ ë°›ìŠµë‹ˆë‹¤. ë³´ìˆ˜ ì§€ì§€ì¸µì´ ì´íƒˆí•˜ê³  êµ°ì˜ ì‚¬ê¸°ê°€ ì €í•˜ë˜ì—ˆìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€-15 (ì‹¤ë§), ë¹ˆê³¤ì¸µ+5 (í‰í™”)"},
            {"name": "êµ­ë°©ë¹„ ì¦ì•¡", "icon": "ğŸª–", "cost": -30, "effect": [-5, -10, -15, -5], "detail": "ìì£¼ êµ­ë°©ë ¥ì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë³µì§€ ì˜ˆì‚°ì„ êµ­ë°©ë¹„ë¡œ ëŒë ¤ì“°ëŠ” ë°”ëŒì— ë¯¼ìƒì´ ì–´ë ¤ì›Œì¡Œê³ , ì²­ë…„ë“¤ì˜ ì§•ë³‘ ë¶€ë‹´ë§Œ ì»¤ì¡ŒìŠµë‹ˆë‹¤.", "reason": "ë…¸ë™ì-15 (ë¯¼ìƒê³ ), êµ­ê³ -30 (ì§€ì¶œ)"}
        ]
    },
    {
        "title": "ğŸš¢ ëŒ€í˜• í•´ìƒ ì°¸ì‚¬",
        "desc": "ëŒ€í˜• ì¸ëª… ì‚¬ê³  ë°œìƒ. êµ­ê°€ ì•ˆì „ ì‹œìŠ¤í…œ ë¶€ì¬ ë¹„íŒ.",
        "options": [
            {"name": "ì „ë©´ ì•ˆì „ ê°ì°°", "icon": "ğŸ”", "cost": -10, "effect": [-10, 5, 5, 5], "detail": "ì‚¬íšŒ ì „ë°˜ì˜ ì•ˆì „ ì‹œìŠ¤í…œì„ ì ê²€í–ˆìŠµë‹ˆë‹¤. êµ­ë¯¼ë“¤ì€ ì•ˆì‹¬í•˜ì§€ë§Œ, ê¸°ì—…ë“¤ì€ ê°•í™”ëœ ê·œì œì™€ ê°ì°° ë•Œë¬¸ì— ì‚¬ì—…í•˜ê¸° í˜ë“¤ë‹¤ë©° ë¶ˆë§Œì„ í† ë¡œí•©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€-10 (ê·œì œ), ì¤‘ì‚°ì¸µ+5 (ì•ˆì „)"},
            {"name": "í¬ìƒì ë°°ìƒ ë° ì¶”ëª¨", "icon": "ğŸ—ï¸", "cost": -15, "effect": [-5, 0, 0, 5], "detail": "ìœ ê°€ì¡±ì„ ìœ„ë¡œí•˜ê³  ì¶”ëª¨ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ 'ì–¸ì œê¹Œì§€ ê³¼ê±°ì— ë§¤ë‹¬ë¦´ ê±°ëƒ'ëŠ” í”¼ë¡œê°ê³¼ ì„¸ê¸ˆ ë‚­ë¹„ ë…¼ë€ì´ êµ­ë¡ ì„ ë¶„ì—´ì‹œí‚µë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+5 (ìœ„ë¡œ), ìë³¸ê°€-5 (í”¼ë¡œê°)"},
            {"name": "ì‹¤ë¬´ì ì²˜ë²Œë¡œ ë§ˆë¬´ë¦¬", "icon": "ğŸš«", "cost": 0, "effect": [0, -10, -10, -5], "detail": "ì‹¤ë¬´ì ëª‡ ëª…ì„ êµ¬ì†í•˜ê³  ë®ìœ¼ë ¤ í–ˆìŠµë‹ˆë‹¤. êµ­ë¯¼ë“¤ì€ 'ì§„ì§œ ì±…ì„ìëŠ” ë¹ ì ¸ë‚˜ê°”ë‹¤'ë©° ì •ë¶€ì˜ ë„ë•ì„±ì„ ì˜ì‹¬í•˜ê³  ë¶ˆì‹ ì´ ê¹Šì–´ì§‘ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ-10 (ë¶ˆì‹ ), ë…¸ë™ì-10 (ë¶„ë…¸)"}
        ]
    },
    {
        "title": "ğŸ§¬ ì‹ ì•½ ë¶€ì‘ìš© ì‚¬íƒœ",
        "desc": "êµ­ì±… ì§€ì› ì‹ ì•½ì˜ ì¹˜ëª…ì  ë¶€ì‘ìš© ë°œê²¬. í”¼í•´ì ì†Œì†¡.",
        "options": [
            {"name": "í—ˆê°€ ì·¨ì†Œ ë° ë°°ìƒ", "icon": "âš–ï¸", "cost": -20, "effect": [-10, 5, 5, 5], "detail": "êµ­ë¯¼ ì•ˆì „ì„ ì„ íƒí•´ ì‹ ë¢°ë¥¼ íšŒë³µí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë°”ì´ì˜¤ ì‚°ì—… íˆ¬ìê°€ ìœ„ì¶•ë˜ê³ , ê´€ë ¨ ê¸°ì—… ì£¼ê°€ í­ë½ìœ¼ë¡œ íˆ¬ìí•œ ê°œë¯¸ë“¤ì´ ìš¸ìƒì…ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ+5 (ì‹ ë¢°), ìë³¸ê°€-10 (ì£¼ê°€í•˜ë½)"},
            {"name": "ì¸ê³¼ê´€ê³„ ê·œëª… ìš°ì„ ", "icon": "ğŸ”¬", "cost": 0, "effect": [10, -10, -10, -5], "detail": "ì‚°ì—… ë³´í˜¸ë¥¼ ìœ„í•´ ì‹œê°„ì„ ëŒì—ˆìŠµë‹ˆë‹¤. ê¸°ì—…ì€ ì•ˆë„í•˜ì§€ë§Œ, í”¼í•´ìë“¤ì€ 'ê¸°ì—… í¸ë“¤ê¸°'ë¼ë©° ìš¸ë¶„ì„ í† í•˜ê³  ì •ë¶€ì˜ ìƒëª… ê²½ì‹œ í’ì¡°ê°€ ë¹„íŒë°›ìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€+10 (ë³´í˜¸), ì¤‘ì‚°ì¸µ-10 (ë¹„íŒ)"},
            {"name": "ê³µê³µ ì˜ë£Œ ê°•í™”", "icon": "ğŸ¥", "cost": -30, "effect": [-15, 5, 10, 15], "detail": "ë¯¼ê°„ ì£¼ë„ ê°œë°œì˜ í•œê³„ë¥¼ ì¸ì •í•˜ê³  ê³µê³µ ì˜ë£Œë¥¼ í™•ì¶©í–ˆìŠµë‹ˆë‹¤. ì˜ë£Œ ì„œë¹„ìŠ¤ ì§ˆì€ ì˜¬ëìœ¼ë‚˜, ë§‰ëŒ€í•œ ì„¸ê¸ˆì´ íˆ¬ì…ë˜ì–´ ê³ ì†Œë“ì¸µ ì¡°ì„¸ ì €í•­ì´ ì‹¬í•©ë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+15 (í˜œíƒ), ìë³¸ê°€-15 (ì„¸ê¸ˆ)"}
        ]
    },
    {
        "title": "ğŸ” í”„ëœì°¨ì´ì¦ˆ ê°‘ì§ˆ",
        "desc": "ë³¸ì‚¬ ê°‘ì§ˆë¡œ ê°€ë§¹ì ì£¼ ì‚¬ë§. ê²½ì œ ë¯¼ì£¼í™” ìš”êµ¬.",
        "options": [
            {"name": "ê·œì œ 3ë²• í†µê³¼", "icon": "ğŸ“œ", "cost": 0, "effect": [-20, 5, 10, 10], "detail": "ëŒ€ê¸°ì—…ì˜ íš¡í¬ë¥¼ ë§‰ì„ ê°•ë ¥í•œ ë²•ì•ˆì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì„(ä¹™)ë“¤ì€ í™˜í˜¸í•˜ì§€ë§Œ, ì¬ê³„ëŠ” 'ê¸°ì—… ì£½ì´ê¸°'ë¼ë©° íˆ¬ìì™€ ì±„ìš©ì„ ì¤„ì´ê² ë‹¤ê³  ìœ¼ë¦„ì¥ì„ ë†“ìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€-20 (ê·œì œ), ë…¸ë™ì+10 (ë³´í˜¸)"},
            {"name": "ììœ¨ ìƒìƒ ìœ ë„", "icon": "ğŸ¤", "cost": 0, "effect": [10, -5, -10, -5], "detail": "ê¸°ì—…ì˜ ìì •ì— ë§¡ê¸°ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì‹œì¥ ììœ ëŠ” ì§€ì¼°ìœ¼ë‚˜, êµ­ë¯¼ë“¤ì€ 'ê¸°ì—… ë´ì£¼ê¸°'ë¼ë©° ì •ë¶€ê°€ ëŒ€ê¸°ì—…ì˜ ë¡œë¹„ì— ë„˜ì–´ê°”ë‹¤ê³  ì˜ì‹¬í•©ë‹ˆë‹¤.", "reason": "ìë³¸ê°€+10 (ììœ ), ë…¸ë™ì-10 (ì‹¤ë§)"},
            {"name": "ê¸´ê¸‰ ëŒ€ì¶œ ì§€ì›", "icon": "ğŸ’¸", "cost": -15, "effect": [-5, 5, 0, 10], "detail": "í”¼í•´ ì…ì€ ìì˜ì—…ìì—ê²Œ ëˆì„ ë¹Œë ¤ì¤ë‹ˆë‹¤. ë‹¹ì¥ íì—…ì€ ë§‰ì•˜ì§€ë§Œ ê·¼ë³¸ì ì¸ ê°‘ì§ˆ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œì´ë©°, ê°€ê³„ ë¶€ì±„ë§Œ ëŠ˜ë¦¬ëŠ” ê¼´ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.", "reason": "ë¹ˆê³¤ì¸µ+10 (ìƒì¡´), êµ­ê³ -15 (ì§€ì¶œ)"}
        ]
    },
    {
        "title": "ğŸ“‰ ì½”ì¸ ê±°ë˜ì†Œ íŒŒì‚°",
        "desc": "1ìœ„ ê±°ë˜ì†Œ ë¨¹íŠ€ íŒŒì‚°. ì²­ë…„ì¸µ ìì‚° ì¦ë°œ.",
        "options": [
            {"name": "íˆ¬ìì ì†ì‹¤ ë³´ì „", "icon": "ğŸ¦", "cost": -25, "effect": [-10, -10, 15, -5], "detail": "ì„¸ê¸ˆìœ¼ë¡œ í”¼í•´ë¥¼ ë³´ì „í•´ì¤ë‹ˆë‹¤. ì²­ë…„ íŒŒì‚°ì€ ë§‰ì•˜ìœ¼ë‚˜, 'ë„ë°• ë¹šì„ ê°šì•„ì£¼ëƒ'ëŠ” ì„±ì‹¤ ë‚©ì„¸ìë“¤ì˜ ë¶„ë…¸ê°€ í­ë°œí–ˆìŠµë‹ˆë‹¤.", "reason": "ë…¸ë™ì+15 (êµ¬ì œ), ì¤‘ì‚°ì¸µ-10 (ë¶„ë…¸)"},
            {"name": "íˆ¬ìì ìê¸° ì±…ì„", "icon": "âš–ï¸", "cost": 0, "effect": [5, 5, -20, -10], "detail": "íˆ¬ê¸° ìˆ˜ìš”ì— ê²½ì¢…ì„ ìš¸ë ¸ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì „ ì¬ì‚°ì„ ìƒì€ ì²­ë…„ì¸µì´ ëŒ€ê±° ì‹ ìš©ë¶ˆëŸ‰ìë¡œ ì „ë½í•˜ë©° ì‚¬íšŒì  í™œë ¥ì´ ê¸‰ê²©íˆ ë–¨ì–´ì§‘ë‹ˆë‹¤.", "reason": "ì¤‘ì‚°ì¸µ+5 (ì›ì¹™), ë…¸ë™ì-20 (íŒŒì‚°)"},
            {"name": "ê°€ìƒìì‚° ê·œì œ ê°•í™”", "icon": "ğŸ”’", "cost": -5, "effect": [-5, 0, -5, 0], "detail": "ë’¤ëŠ¦ê²Œ ê·œì œ ì¥ë²½ì„ ì„¸ì› ìŠµë‹ˆë‹¤. ì‹œì¥ì€ ê±´ì „í•´ì¡Œì§€ë§Œ, 'ì†Œ ìƒê³  ì™¸ì–‘ê°„ ê³ ì¹˜ê¸°'ë¼ëŠ” ë¹„íŒê³¼ í•¨ê»˜ ì‚°ì—… ìœ„ì¶•ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.", "reason": "ìë³¸ê°€-5 (ê·œì œ), ë…¸ë™ì-5 (ë’·ë¶)"}
        ]
    }
]

# -----------------------------------------------------------------------------
# [ì´ˆê¸°í™”] ì„¸ì…˜ ìŠ¤í…Œì´íŠ¸
# -----------------------------------------------------------------------------
if 'turn' not in st.session_state:
    st.session_state.turn = 1
    st.session_state.stats = {"ìë³¸ê°€": 50, "ì¤‘ì‚°ì¸µ": 50, "ë…¸ë™ì": 50, "ë¹ˆê³¤ì¸µ": 50}
    st.session_state.budget = 100 
    st.session_state.game_over = False
    st.session_state.fail_msg = ""
    st.session_state.logs = [] 
    st.session_state.player_name = "" 
    
    deck = list(range(len(CRISES_POOL)))
    random.shuffle(deck)
    st.session_state.event_deck = deck
    st.session_state.current_crisis = CRISES_POOL[st.session_state.event_deck.pop()]

# -----------------------------------------------------------------------------
# [í•¨ìˆ˜] ê²Œì„ ë¡œì§
# -----------------------------------------------------------------------------
def next_turn(choice_idx):
    crisis = st.session_state.current_crisis
    choice = crisis['options'][choice_idx]
    
    st.session_state.budget += choice['cost']
    for i, arch in enumerate(ARCHS):
        st.session_state.stats[arch] += choice['effect'][i]
        st.session_state.stats[arch] = max(0, min(100, st.session_state.stats[arch]))

    sign = "+" if choice['cost'] > 0 else ""
    log_entry = f"ğŸ—“ï¸ **[Turn {st.session_state.turn}] {crisis['title']}**\\nğŸ‘‰ ì„ íƒ: {choice['icon']} {choice['name']} (êµ­ê³  {sign}{choice['cost']}ì¡°)\\nğŸ’¬ ê²°ê³¼: {choice['reason']}"
    st.session_state.logs.insert(0, log_entry)

    fail_reasons = []
    if st.session_state.budget < 0:
        fail_reasons.append("ğŸ’¸ **êµ­ê°€ ë¶€ë„ ì„ ì–¸!** (êµ­ê³  ê³ ê°ˆ)")
    elif any(v <= 0 for v in st.session_state.stats.values()):
        fail_reasons.append(f"ğŸ”¥ **í­ë™ ë°œìƒ!** (ì§€ì§€ìœ¨ 0%)")

    if fail_reasons:
        st.session_state.game_over = True
        st.session_state.fail_msg = fail_reasons[0]
        return

    st.session_state.turn += 1
    
    if st.session_state.turn > 10: 
        st.session_state.game_over = True
        st.session_state.fail_msg = "ğŸ‰ **ì„ê¸° 5ë…„ ë¬´ì‚¬ ë§Œë£Œ!**"
        return
        
    if st.session_state.event_deck:
        next_idx = st.session_state.event_deck.pop()
        st.session_state.current_crisis = CRISES_POOL[next_idx]
    else:
        st.session_state.game_over = True
        st.session_state.fail_msg = "ğŸ‰ **ì„ê¸° 5ë…„ ë¬´ì‚¬ ë§Œë£Œ!**"

def restart():
    st.session_state.clear()
    st.rerun()

# -----------------------------------------------------------------------------
# [UI] í™”ë©´ êµ¬ì„±
# -----------------------------------------------------------------------------
st.set_page_config(page_title="ë¯¸ìŠ¤í„° í”„ë ˆì§€ë˜íŠ¸: ë” ì„œë°”ì´ë²Œ", layout="centered")

# BGM ì¬ìƒ (ì»¨íŠ¸ë¡¤ëŸ¬ í¬í•¨)
st.markdown(get_audio_html("bgm.mp3"), unsafe_allow_html=True)

st.markdown(\"\"\"
<style>
    .stApp { background-color: #1e1e1e; color: white; }
    .stat-box { background-color: #333; padding: 10px; border-radius: 5px; text-align: center; border: 1px solid #555; }
    .crisis-card { background: linear-gradient(135deg, #8b0000 0%, #330000 100%); padding: 0px; border-radius: 15px; margin-bottom: 20px; border: 2px solid #ff4444; overflow: hidden; }
    .crisis-img { width: 100%; height: 250px; object-fit: cover; }
    .crisis-content { padding: 20px; }
    .ending-card { background-color: #222; padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid #555; }
    h1, h2, h3 { color: white !important; }
    p, label, li { color: #dddddd !important; }
    .detail-text { font-size: 0.9rem; color: #aaa; margin-bottom: 10px; }
    
    /* ëª…íŒ¨ ìŠ¤íƒ€ì¼ (êµ­ê¸° ì´ëª¨í‹°ì½˜ ì ìš©) */
    .nameplate {
        background-color: #003478; /* ì²­ì™€ëŒ€ ë¸”ë£¨ */
        border: 4px solid #c2a042; /* ë´‰í™© ê³¨ë“œ */
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin-bottom: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    .flag-icon { font-size: 60px; margin-bottom: 10px; display: block; }
    .nameplate h4 { color: #c2a042 !important; margin: 0; font-weight: bold; font-size: 1.1rem; letter-spacing: 2px; }
    .nameplate h2 { color: white !important; margin: 5px 0 0 0; font-family: 'serif'; font-size: 2.0rem; font-weight: bold; text-shadow: 2px 2px 4px black; }
</style>
\"\"\", unsafe_allow_html=True)

# ë°°ê²½ ì´ë¯¸ì§€ ë¡œë“œ
if os.path.exists(BG_IMAGE_PATH):
    st.image(BG_IMAGE_PATH, use_container_width=True)

st.title("ğŸ›ï¸ ë¯¸ìŠ¤í„° í”„ë ˆì§€ë˜íŠ¸: ë” ì„œë°”ì´ë²Œ")
st.caption("ëª©í‘œ: íŒŒì‚°(êµ­ê³  0)í•˜ê±°ë‚˜ íƒ„í•µ(ì§€ì§€ìœ¨ 0)ë‹¹í•˜ì§€ ì•Šê³  10í„´ì„ ë²„í‹°ì‹­ì‹œì˜¤.")

# ì‚¬ì´ë“œë°”: ì…ë ¥ ë° ê°€ì´ë“œ
with st.sidebar:
    st.header("1. ëŒ€í†µë ¹ ì·¨ì„ì‹")
    
    if st.session_state.player_name == "":
        name_input = st.text_input("ëŒ€í†µë ¹ë‹˜, ì„±í•¨ì´ ì–´ë–»ê²Œ ë˜ì‹­ë‹ˆê¹Œ?", value="")
        if st.button("ì·¨ì„ ì„ ì„œ"):
            st.session_state.player_name = name_input if name_input else "ê°í•˜"
            st.rerun()
    else:
        # [NEW] êµ­ê¸° ëª…íŒ¨ í‘œì‹œ
        st.markdown(f\"\"\"
        <div class="nameplate">
            <div class="flag-icon">ğŸ‡°ğŸ‡·</div>
            <h4>ëŒ€í•œë¯¼êµ­ ëŒ€í†µë ¹</h4>
            <h2>{st.session_state.player_name}</h2>
        </div>
        \"\"\", unsafe_allow_html=True)
    
    st.markdown("---")
    st.header("â„¹ï¸ ê³„ì¸µ ê°€ì´ë“œ")
    with st.expander("â“ ê³„ì¸µë³„ í•µì‹¬ ì´ìµ ë³´ê¸°"):
        for k, v in ARCH_DESC.items():
            st.markdown(f"{v}")
            st.markdown("---")

# HUD (ì´ë¦„ ë¯¸ì…ë ¥ ì‹œ íë¦¬ê²Œ ë³´ì´ê±°ë‚˜ ì•ˆë‚´)
if st.session_state.player_name == "":
    st.warning("ğŸ‘ˆ ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ ì„±í•¨ì„ ì…ë ¥í•˜ê³  [ì·¨ì„ ì„ ì„œ] ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.")
else:
    cols = st.columns(5)
    colors = ["#FFD700", "#00FF00", "#00BFFF", "#FF69B4"] 
    
    budget_color = "red" if st.session_state.budget < 30 else "gold"
    cols[0].markdown(f"<div class='stat-box' style='border-color:{budget_color}; color:{budget_color}'>ğŸ’° êµ­ê³ <br><b>{st.session_state.budget}ì¡°</b></div>", unsafe_allow_html=True)
    
    for i, arch in enumerate(ARCHS):
        val = st.session_state.stats[arch]
        text_color = colors[i]
        if val <= 20: text_color = "red"
        cols[i+1].markdown(f"<div class='stat-box' style='color:{text_color}'>{arch}<br><b>{val}%</b></div>", unsafe_allow_html=True)
    
    if not st.session_state.game_over:
        st.progress(min(1.0, (st.session_state.turn - 1) / 10), text=f"ì„ê¸° ì§„í–‰ë¥ : {st.session_state.turn}/10 í„´")
    
    st.markdown("---")

# ê²Œì„ ë©”ì¸ ë¡œì§ (ì´ë¦„ ì…ë ¥ëœ ê²½ìš°ë§Œ í‘œì‹œ)
if st.session_state.player_name != "":
    if st.session_state.game_over:
        if "ë§Œë£Œ" in st.session_state.fail_msg or "ì„±ê³µ" in st.session_state.fail_msg:
            st.balloons()
            st.success(f"ğŸ† {st.session_state.fail_msg}")
            
            final_stats = st.session_state.stats
            avg_score = sum(final_stats.values()) / 4
            final_budget = st.session_state.budget
            
            st.markdown(f\"\"\"
            <div class="ending-card">
                <h3>ğŸ“œ <b>{st.session_state.player_name} ì •ë¶€</b> êµ­ì • ì„±ì í‘œ</h3>
                <ul>
                    <li>í‰ê·  ì§€ì§€ìœ¨: <b>{avg_score:.1f}%</b></li>
                    <li>ë‚¨ì€ êµ­ê³ : <b>{final_budget}ì¡°</b></li>
                </ul>
            </div>
            \"\"\", unsafe_allow_html=True)
    
            st.subheader("ğŸ“° ì„ê¸° ì¢…ë£Œ íŠ¹ë³„ ë³´ë„")
            if final_budget < 30:
                st.error(f"ğŸ“‰ [ê²½ì œ] {st.session_state.player_name} ì •ë¶€, ê³³ê°„ ë¹„ì–´ë²„ë¦° ëŒ€í•œë¯¼êµ­... ì°¨ê¸° ì •ë¶€ 'ì¬ì • ì ˆë²½' ë– ì•ˆì•„")
            elif avg_score >= 70:
                st.success(f"ğŸŒŸ [ì‚¬ì„¤] 'í†µí•©ê³¼ ë²ˆì˜ì˜ 5ë…„'... {st.session_state.player_name} ëŒ€í†µë ¹, ì—­ì‚¬ì— ë‚¨ì„ ì„±ê³µì  êµ­ì • ìš´ì˜")
            
            worst_arch = min(final_stats, key=final_stats.get)
            if final_stats[worst_arch] < 30:
                st.warning(f"ğŸ’¢ [ì‚¬íšŒ] {worst_arch}ì˜ ë¶„ë…¸... '{st.session_state.player_name} ì •ë¶€ì— ì² ì €íˆ ë²„ë ¤ì¡Œë‹¤' ì‹œìœ„ ì§€ì†")
            
            if avg_score < 40:
                st.error(f"ğŸ’€ [ì •ì¹˜] ì—­ëŒ€ ìµœì € ì§€ì§€ìœ¨ í‡´ì„... {st.session_state.player_name} ëŒ€í†µë ¹ì˜ ì“¸ì“¸í•œ ë’·ëª¨ìŠµ")
            elif avg_score >= 50 and final_budget >= 50:
                st.info(f"âš–ï¸ [í‰ê°€] ìœ„ê¸° ê´€ë¦¬ ëŠ¥ë ¥ ë¹›ë‚¬ë‹¤... {st.session_state.player_name} ì •ë¶€ ì‹¤ìš©ì£¼ì˜ ë…¸ì„  ì£¼íš¨")
    
        else:
            st.error(f"ğŸ’€ GAME OVER: {st.session_state.fail_msg}")
            st.write(f"**{st.session_state.player_name} ëŒ€í†µë ¹**ì€ ì„ê¸°ë¥¼ ì±„ìš°ì§€ ëª»í•˜ê³  ë¶ˆëª…ì˜ˆ í‡´ì§„í–ˆìŠµë‹ˆë‹¤.")
        
        if st.button("ğŸ”„ ìƒˆë¡œìš´ ì„ê¸° ì‹œì‘í•˜ê¸°", type="primary"):
            restart()
            
        with st.expander("ğŸ“œ ì§€ë‚œ ê¸°ë¡ ë³´ê¸°"):
            for log in st.session_state.logs:
                st.info(log)
    
    else:
        crisis = st.session_state.current_crisis
        
        # ì´ë²¤íŠ¸ ì´ë¯¸ì§€ê°€ ë°ì´í„°ì— ìˆë‹¤ë©´ í‘œì‹œ (í˜„ì¬ ë°ì´í„°ì—” ì—†ìŒ, ë°°ê²½ë§Œ ì‚¬ìš©)
        # ë§Œì•½ ê°œë³„ ì´ë¯¸ì§€ë¥¼ ë„£ê³  ì‹¶ë‹¤ë©´ CRISES_POOLì— 'img' í•„ë“œë¥¼ ë‹¤ì‹œ ì¶”ê°€í•˜ê³  íŒŒì¼ ì—…ë¡œë“œ í•„ìš”
        
        st.markdown(f\"\"\"
        <div class="crisis-card">
            <div class="crisis-content">
                <h2>ğŸš¨ [ê¸´ê¸‰ ë³´ê³ ] {crisis['title']}</h2>
                <p style="font-size:1.1rem; margin-top:10px;">{crisis['desc']}</p>
            </div>
        </div>
        \"\"\", unsafe_allow_html=True)
    
        st.write(f"ğŸ‘‡ **{st.session_state.player_name} ëŒ€í†µë ¹ë‹˜, ê²°ë‹¨ì„ ë‚´ë ¤ì£¼ì‹­ì‹œì˜¤:**")
        
        for idx, opt in enumerate(crisis['options']):
            with st.container():
                c1, c2 = st.columns([3, 1])
                with c1:
                    st.markdown(f"**{chr(65+idx)}. {opt['icon']} {opt['name']}**")
                    st.markdown(f"<div class='detail-text'>{opt['detail']}</div>", unsafe_allow_html=True)
                with c2:
                    sign = "+" if opt['cost'] > 0 else ""
                    st.markdown(f"**êµ­ê³  {sign}{opt['cost']}ì¡°**")
                    if st.button(f"ìŠ¹ì¸ ({chr(65+idx)})", key=f"btn_{idx}", use_container_width=True):
                        next_turn(idx)
                        st.rerun()
                st.markdown("---")
    
        with st.expander("ğŸ“œ ì§€ë‚œ êµ­ì • ìš´ì˜ ê¸°ë¡"):
            if not st.session_state.logs:
                st.write("ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.")
            for log in st.session_state.logs:
                st.info(log)
"""

with open("app.py", "w") as f:
    f.write(code)

# 3. Cloudflare ì‹¤í–‰
!wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64
!chmod +x cloudflared-linux-amd64
!nohup ./cloudflared-linux-amd64 tunnel --url http://localhost:8501 > cloudflared.log 2>&1 &
!sleep 5

print("ğŸ‘‡ ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš” (v24.1 íƒœê·¹ê¸° ëª…íŒ¨ + ìƒì‹œ ìš´ì˜ ì•ˆë‚´):")
!grep -o 'https://.*\.trycloudflare.com' cloudflared.log | head -n 1
!streamlit run app.py &>/dev/null
